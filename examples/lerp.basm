%include "./examples/natives.hasm"
%const N 10.0
%entry main

; a + (b - a) * t

lerpf:
	dup 3
	dup 3
	dup 1
	minusf
	dup 3
	mulf
	plusf

	; Clean the stack
	swap 2
	drop
	swap 2
	drop
	swap 2
	drop
	ret


main:
	push 10.0			; a
	push 20.0			; b
	push 0.0			; t
	push 1.0			; 1
	push N				; n
	divf
	
loop:
	dup 3
	dup 3
	dup 3
	call lerpf
	call dump_f64

	; t + (1/n)
	swap 1
	dup 1
	plusf
	swap 1

	; t > 1.0
	dup 1
	push 1.0
	swap 1
	gef

	jmp_if loop

	halt


; Initial 
; top
; 1/n
; t
; b
; a


; First Iteration
; top
; 1/n
; t + 1/n
; b
; a
